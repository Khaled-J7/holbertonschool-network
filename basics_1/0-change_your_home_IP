#!/usr/bin/env bash
# Script that configures an Ubuntu server with the below requirements.

# localhost resolves to 127.0.0.2
# facebook.com resolves to 8.8.8.8

# Step 1: Create a backup of the /etc/hosts file
sudo cp /etc/hosts /etc/hosts.backup

# Step 2: Modify localhost to resolve to 127.0.0.2 in the hosts file
sudo sed -i '/127.0.0.1\s\+localhost/s/127.0.0.1/127.0.0.2/' /etc/hosts

# Step 3: Ensure facebook.com resolves to 8.8.8.8, add if not present
if ! grep -q "8.8.8.8\s\+facebook.com" /etc/hosts; then
    echo "8.8.8.8 facebook.com" | sudo tee -a /etc/hosts
fi

echo "Configuration complete."
